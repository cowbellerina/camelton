#!/usr/bin/env node
var cli = require('../lib/cli.js'),
    main = require('../index.js'),
    pkg = require('../package.json'),
    program = require('commander');

/**
 * Splits a comma-separated string into array.
 *
 * @public
 * @param {String} value
 * @return {Array} A list of values
 */
function list(value) {
  return value.split(',');
}

/**
 * Outputs version, license and copyright information.
 *
 * @public
 */
function version() {
  return pkg.version +
    '\nCopyright Â© ' + pkg.author +
    '\nLicensed under the ' + pkg.license + ' license.';
}

/**
 * Commander.
 */
program
  .version(version())
  .usage('--src=<path> --dest=<paths> [options]')

  .option('--src <path>', 'Path to source file.')
  .option('--dest <paths>', 'Comma-separated list of paths to destination files.', list);

/**
 * Custom help.
 */
program.on('--help', function() {
  var output = '  Example:\n    $ %s --src=en_US.json --dest=fi_FI.json,fi_SV.json';
  console.log(output, pkg.name);
});

program.parse(process.argv);

/**
 * Yeah, baby.
 */
cli(program);
